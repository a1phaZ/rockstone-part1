(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{20:function(e,t,s){},21:function(e,t,s){},23:function(e,t,s){},24:function(e,t,s){"use strict";s.r(t);s(15);var n=s(0),a=s.n(n),c=s(9),l=s.n(c),r=(s(20),s(2)),o=s(7),i=s(13),u=s(3),j=s(10),d=s(11),m=s(5),b=s(14),p=s(12),O=(s(21),s(1)),f=function(e){var t=e.messages,s=Object(n.useState)((function(){return t.length})),a=Object(r.a)(s,2),c=a[0],l=a[1],o=Object(n.useState)(""),i=Object(r.a)(o,2),u=i[0],j=i[1];Object(n.useEffect)((function(){var e=t.length;c<e&&(l(e),j("scale-up-hor-left"))}),[t,c]);var d=t.map((function(e,s){var n=s===t.length-1?u:null;return Object(O.jsx)("p",{className:n,children:e},s)}));return Object(O.jsx)("div",{className:"messages-list",children:d})},g=function(e){Object(b.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(j.a)(this,s),(n=t.call(this,e)).setMessage=function(e){n.setState({message:e})},n.scrollHandler=function(e){n.setState({x:e.target.documentElement.scrollLeft,y:e.target.documentElement.scrollTop})},n.state={message:"",scroll:n.props.getScroll(n.props.id)},n.setMessage=n.setMessage.bind(Object(m.a)(n)),n.scrollHandler=n.scrollHandler.bind(Object(m.a)(n)),n}return Object(d.a)(s,[{key:"componentDidMount",value:function(){document.documentElement.scrollTop=this.state.scroll.y,document.documentElement.scrollLeft=this.state.scroll.x,window.addEventListener("scroll",this.scrollHandler)}},{key:"componentWillUnmount",value:function(){this.props.setScrollPosition(this.props.id,this.state.x||0,this.state.y||0),window.removeEventListener("scroll",this.scrollHandler)}},{key:"render",value:function(){var e=this,t=this.props,s=t.setMessages,n=t.messages,a=t.className,c=this.setMessage,l=this.state.message;return Object(O.jsxs)("div",{className:a,children:[Object(O.jsxs)("form",{className:"row align-items-center",onSubmit:function(e){e.preventDefault(),s(l),c("")},children:[Object(O.jsx)("div",{className:"col-8",children:Object(O.jsx)("textarea",{value:l,className:"form-control",onChange:function(t){var s=t.currentTarget.value;e.setMessage(s)}})}),Object(O.jsx)("div",{className:"col-4",children:Object(O.jsx)("button",{className:"btn btn-primary",children:"Send"})})]}),Object(O.jsx)(f,{messages:n})]})}}]),s}(n.Component),h=(s(23),function(){var e=function(){var e=Object(n.useState)(new Date),t=Object(r.a)(e,2),s=t[0],a=t[1];return Object(n.useEffect)((function(){var e=setInterval((function(){a(new Date)}),1e3);return function(){clearInterval(e)}}),[]),{time:s.toLocaleTimeString("ru",{hour:"numeric",minute:"numeric",second:"numeric"})}}().time;return Object(O.jsx)("p",{children:e})}),v=function(e){var t=e.id,s=e.className,n=e.swipe,a=(e.getScroll,e.setScrollPosition,e.children);return Object(O.jsx)("div",{id:t,className:s,onTouchMove:function(e){n(e)},children:a})},y={messages:[],panel:"messages",time:(new Date).getTime(),scrolls:[]};function x(e,t){switch(t.type){case"setMessages":return Object(u.a)(Object(u.a)({},e),{},{messages:[].concat(Object(i.a)(e.messages),[t.payload.message])});case"setPanel":return Object(u.a)(Object(u.a)({},e),{},{panel:t.payload.panel});case"setScroll":return Object(u.a)(Object(u.a)({},e),{},{scrolls:Object(u.a)(Object(u.a)({},e.scrolls),{},Object(o.a)({},t.payload.id,{x:t.payload.x,y:t.payload.y}))});default:return e}}var S=function(){var e=Object(n.useReducer)(x,y),t=Object(r.a)(e,2),s=t[0],a=t[1],c=function(e){var t=Object(n.useState)(!1),s=Object(r.a)(t,2),a=s[0],c=s[1],l=Object(n.useState)(!1),o=Object(r.a)(l,2),i=o[0],u=o[1],j=Object(n.useState)((function(){return e})),d=Object(r.a)(j,2),m=d[0],b=d[1],p=Object(n.useState)(null),O=Object(r.a)(p,2),f=O[0],g=O[1],h=window.outerWidth/2;return Object(n.useEffect)((function(){return i||a?(g(null),u(!1),void c(!1)):f?(m-f>h&&!a&&(c(!0),g(null)),void(f-m>h&&!i&&(u(!0),g(null)))):void g(m)}),[f,m,i,a,h]),[{forward:a,back:i},function(e){b(e)}]}(null),l=Object(r.a)(c,2),o=l[0],i=o.forward,j=o.back,d=l[1],m=s.panel,b=Object(n.useCallback)((function(e){"time"!==e&&a({type:"setPanel",payload:{panel:"time"}}),"messages"!==e&&a({type:"setPanel",payload:{panel:"messages"}})}),[]);Object(n.useEffect)((function(){(i||j)&&(i&&b("time"),j&&b("messages"))}),[i,j,b]);var p=Object(n.useCallback)((function(e,t,s){a({type:"setScroll",payload:{id:e,x:t,y:s}})}),[]);return Object(O.jsx)("div",{className:"App container pt-3",children:Object(O.jsxs)(v,{id:s.panel,className:"".concat(s.panel,"-panel"),swipe:function(e){d(e.changedTouches[0].clientX)},children:["messages"===m&&Object(O.jsx)(g,{id:"messages",className:"messages-panel",messages:s.messages,setMessages:function(e){a({type:"setMessages",payload:{message:e}})},getScroll:function(e){return s.scrolls[e]?Object(u.a)({},s.scrolls[e]):{x:0,y:0}},setScrollPosition:p}),"time"===m&&Object(O.jsx)(h,{})]})})},w=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,25)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,l=t.getTTFB;s(e),n(e),a(e),c(e),l(e)}))};l.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(S,{})}),document.getElementById("root")),w()}},[[24,1,2]]]);
//# sourceMappingURL=main.45ed697b.chunk.js.map